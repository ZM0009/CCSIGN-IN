<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Class Clowns Sports Day – Audience Sign In</title>
  <link href="https://fonts.googleapis.com/css2?family=Graduate&family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --blue: #0a3d91;
      --blue-mid: #1e5fd8;
      --blue-light: #e6f0ff;
      --ink: #0b1b33;
      --white: #ffffff;
      --shadow: rgba(10,61,145,.18);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background: linear-gradient(180deg, var(--blue-light), #f7f9fd 55%, #ffffff);
      color: var(--ink);
    }
    header {
      padding: 18px 20px;
      background: linear-gradient(90deg, var(--blue), var(--blue-mid));
      color: var(--white);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      box-shadow: 0 10px 28px rgba(0,0,0,.25);
      position: sticky;
      top: 0;
      z-index: 5;
    }
    header .title {
      font-family: 'Graduate', serif;
      font-size: 24px;
      letter-spacing: 1px;
      text-transform: uppercase;
      line-height: 1.1;
      text-shadow: 0 2px 0 rgba(0,0,0,.18);
    }
    .tabs { display: flex; gap: 10px; flex-wrap: wrap; justify-content: flex-end; }
    .tabs button {
      padding: 10px 14px;
      font-weight: 800;
      border-radius: 999px;
      border: 2px solid rgba(255,255,255,.95);
      background: transparent;
      color: var(--white);
      cursor: pointer;
      transition: transform .08s ease, background .18s ease, color .18s ease;
      user-select: none;
    }
    .tabs button:hover { background: var(--white); color: var(--blue); transform: translateY(-1px); }
    main { padding: 22px; max-width: 1200px; margin: 0 auto; }
    .hidden { display: none; }
    .searchWrap { display: flex; gap: 10px; align-items: center; margin-bottom: 18px; }
    input[type="search"] {
      width: 100%;
      padding: 14px 14px;
      font-size: 16px;
      border-radius: 14px;
      border: 2px solid rgba(10,61,145,.75);
      outline: none;
      background: rgba(255,255,255,.85);
      box-shadow: 0 10px 22px rgba(10,61,145,.07);
    }
    input[type="search"]:focus {
      border-color: var(--blue-mid);
      box-shadow: 0 0 0 4px rgba(30,95,216,.18), 0 10px 22px rgba(10,61,145,.08);
    }
    .lists { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
    .panel {
      background: rgba(255,255,255,.8);
      border-radius: 20px;
      padding: 14px 14px 16px;
      box-shadow: 0 16px 36px var(--shadow);
      border: 1px solid rgba(10,61,145,.12);
    }
    h3 {
      margin: 0 0 10px 2px;
      color: var(--blue);
      font-weight: 900;
      letter-spacing: .6px;
      text-transform: uppercase;
      font-size: 14px;
    }
    .count { font-weight: 800; color: rgba(11,27,51,.65); margin-left: 6px; text-transform: none; }
    .list {
      background: var(--white);
      border-radius: 18px;
      padding: 10px;
      max-height: 64vh;
      overflow-y: auto;
      border: 1px solid rgba(10,61,145,.10);
    }
    .item {
      padding: 12px 14px;
      margin-bottom: 8px;
      border-radius: 14px;
      cursor: pointer;
      font-weight: 700;
      background: var(--blue-light);
      transition: transform .08s ease, background .15s ease, color .15s ease;
      border: 1px solid rgba(10,61,145,.10);
    }
    .item:hover { background: var(--blue-mid); color: var(--white); transform: scale(1.015); }
    .btnRow { display: flex; gap: 10px; flex-wrap: wrap; margin: 10px 0 12px; }
    .actionBtn {
      padding: 10px 14px;
      border-radius: 14px;
      border: 2px solid rgba(10,61,145,.75);
      background: var(--white);
      color: var(--blue);
      font-weight: 900;
      cursor: pointer;
      transition: background .18s ease, color .18s ease, transform .08s ease;
    }
    .actionBtn:hover { background: var(--blue); color: var(--white); transform: translateY(-1px); }
    .danger { border-color: rgba(210, 40, 70, .75); color: rgb(160, 20, 50); }
    .danger:hover { background: rgb(200, 30, 60); color: var(--white); }
    textarea {
      width: 100%;
      height: 240px;
      padding: 14px;
      border-radius: 16px;
      border: 2px solid rgba(10,61,145,.75);
      font-family: 'Inter', sans-serif;
      font-size: 14px;
      background: rgba(255,255,255,.92);
      outline: none;
      box-shadow: 0 12px 28px rgba(10,61,145,.10);
    }
    .helper { margin: 0 0 10px; color: rgba(11,27,51,.70); font-weight: 600; }
    .empty { padding: 12px 12px 4px; color: rgba(11,27,51,.60); font-weight: 700; }
    section { animation: fade .22s ease; }
    @keyframes fade { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    @media (max-width: 860px) {
      .lists { grid-template-columns: 1fr; }
      header .title { font-size: 18px; }
      .list { max-height: 52vh; }
    }
  </style>
</head>

<body>
<header>
  <div class="title">Class Clowns Sports Day – Audience Sign In</div>
  <div class="tabs">
    <button type="button" onclick="showBoard()">Board</button>
    <button type="button" onclick="showFinish()">Finish</button>
    <button type="button" onclick="showAdd()">Add Names</button>
  </div>
</header>

<main>
  <section id="board">
    <div class="searchWrap">
      <input type="search" id="search" placeholder="Search name…" />
    </div>

    <div class="lists">
      <div class="panel">
        <h3>Not Signed In <span class="count" id="unsignedCount"></span></h3>
        <div class="list" id="unsigned"></div>
        <div class="empty hidden" id="unsignedEmpty">No matching names.</div>
      </div>

      <div class="panel">
        <h3>Signed In <span class="count" id="signedCount"></span></h3>
        <div class="list" id="signed"></div>
        <div class="empty hidden" id="signedEmpty">Nobody signed in yet.</div>
      </div>
    </div>
  </section>

  <section id="finish" class="hidden">
    <div class="panel">
      <h3>Signed-In List <span class="count" id="exportCount"></span></h3>
      <div class="btnRow">
        <button class="actionBtn" type="button" onclick="copyList()">Copy</button>
        <button class="actionBtn" type="button" onclick="downloadCSV()">Download CSV</button>
        <button class="actionBtn danger" type="button" onclick="resetAll()">Reset</button>
      </div>
      <textarea id="export" readonly></textarea>
    </div>
  </section>

  <section id="add" class="hidden">
    <div class="panel">
      <h3>Add Walk-Ups</h3>
      <p class="helper">Enter one name per line. These will be added immediately (and alphabetised).</p>
      <textarea id="newNames" placeholder="Jane Doe&#10;John Smith"></textarea>
      <div class="btnRow">
        <button class="actionBtn" type="button" onclick="addNames()">Add to roster</button>
        <button class="actionBtn" type="button" onclick="showBoard()">Back to board</button>
      </div>
    </div>
  </section>
</main>

<script>
  // Alphabetised roster (editable)
  const DEFAULT_ROSTER = ["Abbi Andrews", "Adrian Tasselli", "Aleigha Lamb", "Alessandra Lasas Prado", "Alex Delis", "Alex Li", "Alex V", "Ali Bagheban", "Alinta-Jade Quayle", "Andrew Hall", "April Laird", "Bailey Vaughan", "Belinda Andrade", "Bhoomi Miswin", "Bingyan Xu", "Cade Buchanan", "Caitlyn Phanith", "Carmela Karipis", "Caroline Leon", "Chae Ruffo", "Charlotte Rosenwould", "Chloe Lambert", "Chloe Quayle-Williams", "Christina Wei", "Claire Coope", "Dara Kaldor", "Darren Hopwood", "Demetra Proestos", "Elizabeth Dormido", "Elizabeth Langley", "Emily Weskin", "Emily Zhang", "Erandi Kuruppuarachchi", "Fatih Sonmez", "Fiona Doig", "Florian Cerveaux", "Georgia Middleton", "Gillian Sheargold", "Glenn Paul", "Gokcem Sonmez", "Gul Shanobar Shaik", "Guy Kellaway", "Hannah White", "Hassan Marasigan", "Hayley Arroyo", "Holly Price", "Hudson Donoghue", "Jack Rowland", "Jackie Nevill", "Jade Davis", "James Louvris", "Jamie Wales", "Jamil Bayeh", "Jane Aellig", "Jason Tleige", "Jayanti Mandasari", "Jayden Thomas", "Jean Mathew", "Jesse Donoghue", "Jessica Strobach", "Jessica Taylor", "JG Constantine", "Jodee Knowles", "Jodie Chapman", "Joel Bell", "Jon LS", "Josephine Karipis", "Joshua Catania", "Justin Lopes", "Kane Barker", "Kee Forster", "Keith Hampton", "Kimberly Burns", "Klara Aellig", "Lara Weskin", "Laura Chapman", "Leanne Thomas", "Leo Lavecky", "Lilly Bayeh", "Lucia Andrade", "Lyn Lace", "Lynette Cole", "Magalie Rouillard-Bazinet", "Mani Grover", "Maria Tavares", "Mariana Pineda Ladino", "Matthew Pails", "Marilyn Mariakis", "Medina Sonmez", "Melissa Davidson", "Michael Komolafe", "Michelle Morris", "Miswin Mahesh", "Mohammed JaliliBaleh", "Molly Smith", "Morgan Sheargold", "Mustaf Ali", "Naithan Sheridan", "Nathan Flint", "Neil Single", "Niamh Bray", "Nikitha E", "Nina Blair", "Olivia Vaughan", "Opus Cranney", "Pablo Andrade", "Paula Martin", "Poppy Millanta", "Rami Tamer", "Rebecca Hegarty", "Reena Mahesh", "Robert Tannous", "Sarika Vashisth", "Sema Sert", "Shnaya Vashisth", "Sophia Le", "Stan Cebokli", "Sue OReilly", "Thira Miswin", "Tina Tasselli", "Trav Hopwood", "Trish Saad", "Velutha Parambath Mahesan", "Violet Arroyo", "Willa Zheng", "William Rosenwould", "Zaian Arpa"];

  // Load signed list from localStorage
  let signed = JSON.parse(localStorage.getItem("signed") || "[]");

  // Cache DOM
  const board = document.getElementById("board");
  const finish = document.getElementById("finish");
  const add = document.getElementById("add");

  const searchEl = document.getElementById("search");
  const unsignedEl = document.getElementById("unsigned");
  const signedEl = document.getElementById("signed");
  const exportEl = document.getElementById("export");
  const newNamesEl = document.getElementById("newNames");

  const unsignedCountEl = document.getElementById("unsignedCount");
  const signedCountEl = document.getElementById("signedCount");
  const exportCountEl = document.getElementById("exportCount");
  const unsignedEmptyEl = document.getElementById("unsignedEmpty");
  const signedEmptyEl = document.getElementById("signedEmpty");

  function hideAll(){
    board.classList.add("hidden");
    finish.classList.add("hidden");
    add.classList.add("hidden");
  }
  function showBoard(){ hideAll(); board.classList.remove("hidden"); render(); }
  function showFinish(){ hideAll(); finish.classList.remove("hidden"); render(); }
  function showAdd(){ hideAll(); add.classList.remove("hidden"); }

  function save(){
    localStorage.setItem("signed", JSON.stringify(signed));
  }

  function render(){
    const q = (searchEl.value || "").trim().toLowerCase();
    const signedSet = new Set(signed);

    const unsigned = DEFAULT_ROSTER.filter(n => !signedSet.has(n) && n.toLowerCase().includes(q));

    unsignedEl.innerHTML = unsigned.map(n =>
      `<div class="item" data-name="${escapeHtml(n)}">${escapeHtml(n)}</div>`
    ).join("");
    unsignedEmptyEl.classList.toggle("hidden", unsigned.length !== 0);

    signedEl.innerHTML = signed.map(n =>
      `<div class="item" data-name="${escapeHtml(n)}">${escapeHtml(n)}</div>`
    ).join("");
    signedEmptyEl.classList.toggle("hidden", signed.length !== 0);

    unsignedCountEl.textContent = `(${unsigned.length})`;
    signedCountEl.textContent = `(${signed.length})`;
    exportCountEl.textContent = `(${signed.length})`;
    exportEl.value = signed.join("\n");
  }

  function escapeHtml(str){
    return String(str)
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  // Click handling
  unsignedEl.addEventListener("click", (e) => {
    const item = e.target.closest(".item");
    if(!item) return;
    const realName = item.textContent;
    if(!signed.includes(realName)){
      signed.push(realName);
      save();
      render();
    }
  });

  signedEl.addEventListener("click", (e) => {
    const item = e.target.closest(".item");
    if(!item) return;
    const realName = item.textContent;
    signed = signed.filter(n => n !== realName);
    save();
    render();
  });

  searchEl.addEventListener("input", render);

  function addNames(){
    const lines = (newNamesEl.value || "")
      .split(/\r?\n/)
      .map(l => l.trim())
      .filter(Boolean);

    for(const n of lines){
      if(!DEFAULT_ROSTER.includes(n)){
        DEFAULT_ROSTER.push(n);
      }
    }
    DEFAULT_ROSTER.sort((a,b) => a.localeCompare(b, undefined, { sensitivity: "base" }));
    newNamesEl.value = "";
    showBoard();
    render();
  }

  async function copyList(){
    try{
      await navigator.clipboard.writeText(exportEl.value || "");
    }catch{
      // ignore; user can manually copy
    }
  }

  function downloadCSV(){
    const csv = "Name\n" + signed.map(n => `"${n.replaceAll('"','""')}"`).join("\n");
    const blob = new Blob([csv], {type:"text/csv;charset=utf-8"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "signed_in.csv";
    document.body.appendChild(a);
    a.click();
    a.remove();
  }

  function resetAll(){
    if(confirm("Reset all sign-ins?")){
      signed = [];
      localStorage.removeItem("signed");
      render();
    }
  }

  render();
</script>
</body>
</html>
