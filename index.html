<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Class Clowns Sports Day – Audience Sign In</title>

  <!-- College / Sports style font -->
  <link href="https://fonts.googleapis.com/css2?family=Graduate&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --blue: #0a3d91;
      --blue-light: #e6f0ff;
      --blue-mid: #1e5fd8;
      --white: #ffffff;
      --bg: #f4f7fb;
    }

    body {
      margin: 0;
      font-family: 'Inter', system-ui, sans-serif;
      background: linear-gradient(180deg, var(--blue-light), var(--bg));
      color: #0b1b33;
    }

    header {
      padding: 20px;
      background: linear-gradient(90deg, var(--blue), var(--blue-mid));
      color: var(--white);
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 6px 20px rgba(0,0,0,.25);
    }

    header strong {
      font-family: 'Graduate', serif;
      font-size: 26px;
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    .tabs button {
      margin-left: 10px;
      padding: 10px 16px;
      font-weight: 700;
      border-radius: 999px;
      border: 2px solid var(--white);
      background: transparent;
      color: var(--white);
      cursor: pointer;
      transition: all .2s ease;
    }

    .tabs button:hover {
      background: var(--white);
      color: var(--blue);
    }

    main {
      padding: 24px;
      max-width: 1200px;
      margin: auto;
    }

    .hidden { display: none; }

    input[type="search"] {
      width: 100%;
      padding: 14px;
      font-size: 16px;
      border-radius: 14px;
      border: 2px solid var(--blue);
      margin-bottom: 20px;
    }

    .lists {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }

    .list {
      background: var(--white);
      border-radius: 20px;
      padding: 16px;
      max-height: 65vh;
      overflow-y: auto;
      box-shadow: 0 12px 30px rgba(10,61,145,.15);
    }

    h3 {
      margin-top: 0;
      color: var(--blue);
      font-weight: 800;
      letter-spacing: .5px;
    }

    .item {
      padding: 12px 14px;
      margin-bottom: 6px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
      background: var(--blue-light);
      transition: transform .08s ease, background .15s ease;
    }

    .item:hover {
      background: var(--blue-mid);
      color: var(--white);
      transform: scale(1.02);
    }

    textarea {
      width: 100%;
      height: 240px;
      padding: 14px;
      border-radius: 16px;
      border: 2px solid var(--blue);
      font-family: 'Inter', sans-serif;
      font-size: 14px;
    }

    button {
      margin-top: 10px;
    }

    section {
      animation: fade .25s ease;
    }

    @keyframes fade {
      from { opacity: 0; transform: translateY(4px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 800px) {
      .lists {
        grid-template-columns: 1fr;
      }
      header strong {
        font-size: 20px;
      }
    }
  </style>
</head>

<body>

<header>
  <strong>Class Clowns Sports Day – Audience Sign In</strong>
  <div class="tabs">
    <button onclick="showBoard()">Board</button>
    <button onclick="showFinish()">Finish</button>
    <button onclick="showAdd()">Add Names</button>
  </div>
</header>

<main>
  <section id="board">
    <input type="search" id="search" placeholder="Search name…" oninput="render()" />
    <div class="lists">
      <div>
        <h3>Not Signed In</h3>
        <div class="list" id="unsigned"></div>
      </div>
      <div>
        <h3>Signed In</h3>
        <div class="list" id="signed"></div>
      </div>
    </div>
  </section>

  <section id="finish" class="hidden">
    <h3>Signed-In List</h3>
    <button onclick="copyList()">Copy</button>
    <button onclick="downloadCSV()">Download CSV</button>
    <button onclick="resetAll()">Reset</button>
    <textarea id="export"></textarea>
  </section>

  <section id="add" class="hidden">
    <h3>Add Walk‑Ups</h3>
    <textarea id="newNames" placeholder="Jane Doe&#10;John Smith"></textarea>
    <button onclick="addNames()">Add to roster</button>
  </section>
</main>

<script>
const DEFAULT_ROSTER = [...JSON.parse(`['Abbi Andrews', 'Adrian Tasselli', 'Aleigha Lamb', 'Alex Delis', 'Alex Li', 'Alex V', 'Alessandra Lasas Prado', 'Ali Bagheban', 'Alinta-Jade Quayle', 'Andrew Hall', 'April Laird', 'Belinda Andrade', 'Bhoomi Miswin', 'Bingyan Xu', 'Cade Buchanan', 'Caroline Leon', 'Carmela Karipis', 'Charlotte Rosenwould', 'Chae Ruffo', 'Chloe Lambert', 'Chloe Quayle-Williams', 'Christina Wei', 'Claire Coope', 'Dara Kaldor', 'Darren Hopwood', 'Demetra Proestos', 'Elizabeth Dormido', 'Elizabeth Langley', 'Emily Weskin', 'Emily Zhang', 'Erandi Kuruppuarachchi', 'Fatih Sonmez', 'Fiona Doig', 'Florian Cerveaux', 'Georgia Middleton', 'Gillian Sheargold', 'Glenn Paul', 'Gokcem Sonmez', 'Gul Shanobar Shaik', 'Guy Kellaway', 'Hannah White', 'Hassan Marasigan', 'Hayley Arroyo', 'Holly Price', 'Hudson Donoghue', 'Jack Rowland', 'Jackie Nevill', 'Jake Saad', 'James Louvris', 'Jamie Wales', 'Jane Aellig', 'Jason Tleige', 'Jayden Thomas', 'Jayanti Mandasari', 'Jean Mathew', 'Jesse Donoghue', 'Jessica Strobach', 'Jessica Taylor', 'JG Constantine', 'Jodee Knowles', 'Joel Bell', 'Jon LS', 'Josephine Karipis', 'Joshua Catania', 'Justin Lopes', 'Kane Barker', 'Kee Forster', 'Keith Hampton', 'Kimberly Burns', 'Klara Aellig', 'Lara Weskin', 'Laura Chapman', 'Leanne Thomas', 'Leo Lavecky', 'Lucia Andrade', 'Lilly Bayeh', 'Lyn Lace', 'Lynette Cole', 'Magalie Rouillard-Bazinet', 'Mani Grover', 'Mariana Pineda Ladino', 'Maria Tavares', 'Matthew Pails', 'Medina Sonmez', 'Melissa Davidson', 'Michael Komolafe', 'Michelle Morris', 'Miswin Mahesh', 'Mohammed JaliliBaleh', 'Molly Smith', 'Morgan Sheargold', 'Mustaf Ali', 'Naithan Sheridan', 'Nathan Flint', 'Neil Single', 'Niamh Bray', 'Nikitha E', 'Nina Blair', 'Olivia Vaughan', 'Opus Cranney', 'Paula Martin', 'Pablo Andrade', 'Poppy Millanta', 'Rami Tamer', 'Rebecca Hegarty', 'Reena Mahesh', 'Robert Tannous', 'Sarika Vashisth', 'Sema Sert', 'Shnaya Vashisth', 'Sophia Le', 'Stan Cebokli', 'Sue OReilly', 'Thira Miswin', 'Tina Tasselli', 'Trav Hopwood', 'Trish Saad', 'Velutha Parambath Mahesan', 'Violet Arroyo', 'Willa Zheng', 'William Rosenwould', 'Zaian Arpa']`)];
  const STORAGE_SIGNED_KEY = "signed";
  const STORAGE_ROSTER_KEY = "roster_v1";

  function loadRoster(){
    try{
      const raw = localStorage.getItem(STORAGE_ROSTER_KEY);
      if(!raw) return DEFAULT_ROSTER.slice();
      const parsed = JSON.parse(raw);
      return Array.isArray(parsed) ? parsed : DEFAULT_ROSTER.slice();
    }catch{
      return DEFAULT_ROSTER.slice();
    }
  }

  function saveRoster(){
    localStorage.setItem(STORAGE_ROSTER_KEY, JSON.stringify(ROSTER));
  }

  // Use a persistent roster (includes any walk-ups you add)
  let ROSTER = loadRoster();


let signed = JSON.parse(localStorage.getItem(STORAGE_SIGNED_KEY) || "[]");

function render() {
  const q = document.getElementById("search").value.toLowerCase();
  const unsigned = ROSTER.filter(n => !signed.includes(n) && n.toLowerCase().includes(q));
  document.getElementById("unsigned").innerHTML =
    unsigned.map(n => `<div class="item" onclick="signIn('${n.replace(/'/g,"\\'")}')">${n}</div>`).join("");
  document.getElementById("signed").innerHTML =
    signed.map(n => `<div class="item" onclick="undo('${n.replace(/'/g,"\\'")}')">${n}</div>`).join("");
  document.getElementById("export").value = signed.join("\n");
}

function signIn(n){ signed.push(n); save(); }
function undo(n){ signed = signed.filter(x => x !== n); save(); }
function save(){ localStorage.setItem(STORAGE_SIGNED_KEY, JSON.stringify(signed)); render(); }

function showBoard(){ hideAll(); board.classList.remove("hidden"); }
function showFinish(){ hideAll(); finish.classList.remove("hidden"); }
function showAdd(){ hideAll(); add.classList.remove("hidden"); }
function hideAll(){ board.classList.add("hidden"); finish.classList.add("hidden"); add.classList.add("hidden"); }

function addNames(){
  const lines = newNames.value.split(/\r?\n/).map(l => l.trim()).filter(Boolean);
  lines.forEach(n => { if(!DEFAULT_ROSTER.includes(n)) DEFAULT_ROSTER.push(n); });
  DEFAULT_ROSTER.sort();
  newNames.value = "";
  showBoard();
  render();
}

function copyList(){ navigator.clipboard.writeText(export.value); }
function downloadCSV(){
  const blob = new Blob(["Name\n"+signed.join("\n")], {type:"text/csv"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "signed_in.csv";
  a.click();
}

function resetAll(){
  if(confirm("Reset all sign-ins?")){
    signed = [];
    localStorage.removeItem(STORAGE_SIGNED_KEY);
    render();
  }
}

if(!localStorage.getItem(STORAGE_ROSTER_KEY)) { saveRoster(); }
  render();
</script>

</body>
</html>
